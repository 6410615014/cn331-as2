{% extends "base.html" %}
{% block title %}จัดการห้อง{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
  <h2 class="fw-bold text-dark mb-0"><i class="bi bi-gear me-2"></i> จัดการห้อง</h2>
  <a class="btn btn-outline-secondary rounded-pill px-4"
   href="/admin/rooms/room/"
   target="_blank" rel="noopener noreferrer">
  <i class="bi bi-box-arrow-up-right me-1"></i> ไปที่ Django Admin
</a>

</div>

<div class="card border-0 shadow-sm rounded-4">
  <div class="card-body p-0">
    <div class="table-responsive">
      <table class="table align-middle mb-0">
        <thead class="table-light">
          <tr>
            <th scope="col">รหัส</th>
            <th scope="col">ชื่อห้อง</th>
            <th scope="col">ความจุ</th>
            <th scope="col">สถานะ</th>
            <th scope="col" class="text-center">การจัดการ</th>
          </tr>
        </thead>
        <tbody>
          {% for r in rooms %}
            <tr class="room-row">
              <td class="fw-semibold text-primary">{{ r.code }}</td>
              <td>
                <a href="{% url 'rooms:manage_room_detail' r.pk %}" class="text-decoration-none">
                  {{ r.name }}
                </a>
              </td>
              <td>{{ r.capacity }}</td>
              <td>
                {% if r.is_active %}
                  <span class="badge bg-success-subtle text-success rounded-pill px-3 py-2">เปิด</span>
                {% else %}
                  <span class="badge bg-danger-subtle text-danger rounded-pill px-3 py-2">ปิด</span>
                {% endif %}
              </td>
              <td class="text-center">
                <a class="btn btn-sm btn-outline-primary rounded-pill px-3 py-1"
                   href="{% url 'rooms:toggle_room_active' r.pk %}">
                   เปิด/ปิด
                </a>
              </td>
            </tr>
          {% empty %}
            <tr>
              <td colspan="5" class="text-center text-muted py-4">ยังไม่มีห้องในระบบ</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>

<style>
.room-row {
  transition: all 0.2s ease-in-out;
}
.room-row:hover {
  background-color: #fffbea; 
}
</style>
{% endblock %}
